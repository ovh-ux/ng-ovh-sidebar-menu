/*! ovh-angular-sidebar-menu - 6.0.0 - 2018-02-02 */
!function(){"use strict";angular.module("ovh-angular-sidebar-menu",["ui.router","pascalprecht.translate","ng-slide-down","ovh-angular-actions-menu"])}(),angular.module("ovh-angular-sidebar-menu").directive("sidebarMenuListItem",["$compile",function(a){"use strict";return{templateUrl:"ovh-angular-sidebar-menu-list/ovh-angular-sidebar-menu-list-item/ovh-angular-sidebar-menu-list-item.html",restrict:"A",scope:{item:"=sidebarMenuListItem"},require:["sidebarMenuListItem","^sidebarMenuList"],link:function(b,c,d,e){var f,g=e[0];g.item.allowSubItems?(f=c.find("nav.menu-sub-items"),f.find("> .sub-menu").length||a("<ul data-sidebar-menu-list data-sidebar-menu-list-items='ItemMenuCtrl.item.subItems' class='sub-menu menu-level-{{ ItemMenuCtrl.item.level + 1 }}'></ul>")(b,function(a){f.append(a)}),g.groupScrollElement=c.find(".group-scroll-content"),g.item.infiniteScroll&&(g.groupScrollElement.on("scroll",function(){g.addMoreItems()}),b.$on("$destroy",function(){g.groupScrollElement.off("scroll")}))):c.find(".group-content-wrapper").empty()},bindToController:!0,controllerAs:"ItemMenuCtrl",controller:["$scope","$timeout","SidebarMenu",function(a,b,c){var d=this;d.model={search:null},d.loading={search:!1},d.getInnerTemplateUrl=function(){return c.getInnerMenuItemTemplatePath()},d.getMinItemsForEnablingSearch=function(){return c.getMinItemsForEnablingSearch()},d.isSearchEnabled=function(){if(d.item.allowSearch){if(d.item.subItemsAdded.length>d.getMinItemsForEnablingSearch())return!0;var a=0;return d.item.subItemsAdded.every(function(b){return a+=_.filter(b.subItemsAdded,{searchable:!0}).length,a<=d.getMinItemsForEnablingSearch()}),a>d.getMinItemsForEnablingSearch()}return!1},a.$watch("item",function(){d.item.getScrollbar=function(){var a=d.groupScrollElement.height(),b=d.groupScrollElement.get(0).scrollHeight,c=d.groupScrollElement.get(0).scrollTop,e={visible:b>a,bottom:c+a>=.9*b};return e}}),d.addMoreItems=function(){d.item.appendPendingListItemsAsync()},d.toggleItemOpenState=function(){return d.errorVisible=!1,d.item.loadSubItems().then(function(){c.toggleMenuItemOpenState(d.item)})["catch"](function(){d.errorVisible=!0}),!0},d.launchSearch=function(){d.item.filterSubItems(d.model.search)},d.viewMore=function(){if(d.item.viewMore&&angular.isFunction(d.item.viewMore.action)){var a=d.item.viewMore.action(),c=null;a&&a.$promise?c=a.$promise:a&&angular.isFunction(a.then)&&(c=a),c&&c.then(function(){return b(function(){d.groupScrollElement.animate({scrollTop:d.groupScrollElement[0].scrollHeight})},250)})}}}]}}]),angular.module("ovh-angular-sidebar-menu").factory("SidebarMenuListItem",["$q","$timeout",function(a,b){"use strict";function c(a){a||(a={}),this.id=a.id||_.random(_.now()),this.parentId=a.parentId||null,this.title=a.title,this.error=a.error,this.prefix=a.prefix,this.icon=a.icon,this.category=a.category||"none",this.status=a.status||"none",this.onClick=_.isFunction(a.onClick)?a.onClick:null,this.namespace=a.namespace,this.level=a.level,this.onLoad=a.onLoad,this.loadOnState=a.loadOnState,this.loadOnStateParams=a.loadOnStateParams||{},this.isLoaded=!1,this.loading=!1,a.state&&!a.url?(this.state=a.state,this.stateParams=a.stateParams||{}):a.url&&!a.state&&(this.url=a.url,this.target=a.target||"_blank"),this.subItems=[],this.subItemsPending=[],this.subItemsAdded=[],this.allowSubItems=a.allowSubItems||!1,this.viewAllItem=a.viewAllItem||null,1===this.level&&(this.allowSearch=a.allowSearch||!1),this.viewMore=a.viewMore||null,this.isOpen=!1,this.isActive=!1,this.searchable=a.searchable!==!1,this.searchKey=angular.isString(this.id)?this.id:"",angular.isString(this.title)&&(this.searchKey+=" "+this.title),this.searchKey=this.searchKey.toLowerCase(),this.noSearchResults=!1,this.infiniteScroll=a.infiniteScroll||!1}return c.prototype.hasSubItems=function(){var a=this;return a.subItems.length>0||a.subItemsPending.length>0},c.prototype.getSubItems=function(){return this.subItems.concat(this.subItemsPending)},c.prototype.getTitle=function(){var a=this;return a.prefix?a.prefix+" "+a.title:a.title},c.prototype.getFullSref=function(){var a=this;return a.state+"("+JSON.stringify(a.stateParams)+")"},c.prototype.loadSubItems=function(b){var c=this,d=a.when([]);return!c.onLoad||!c.allowSubItems||c.loading||c.isLoaded&&!b||(c.loading=!0,d=c.onLoad().then(function(a){return c.isLoaded=!0,a})["finally"](function(){c.loading=!1})),d},c.prototype.toggleOpen=function(){var a=this;return a.hasSubItems()&&(a.isOpen=!a.isOpen),a.isOpen&&a.subItemsPending.length&&a.appendPendingListItemsAsync(),a.isOpen||(a._garbageCollect&&b.cancel(a._garbageCollect),a._garbageCollect=b(function(){a.isOpen||(a.subItemsPending=a.subItems.concat(a.subItemsPending),a.subItems=[])},3e3)),a},c.prototype.appendPendingListItems=function(){var a=this;a.subItems=a.subItems.concat(a.subItemsPending),a.subItemsPending=[]},c.prototype.appendPendingListItemsAsync=function(){var a=this;b(function(){var c=_.slice(a.subItemsPending,0,5);if(a.infiniteScroll&&a.getScrollbar){var d=a.getScrollbar();if(d.visible&&!d.bottom)return}c.length&&a.isOpen&&(a.subItemsPending=a.subItemsPending.slice(c.length),a.subItems=a.subItems.concat(c),b(function(){a.appendPendingListItemsAsync()},0))})},c.prototype.addSubItem=function(a){var b=this,d=null;return b.allowSubItems?(d=new c(angular.extend(a,{parentId:b.id})),b.isOpen?b.subItems.push(d):b.subItemsPending.push(d),b.subItemsAdded.push(d),d):null},c.prototype.addSubItems=function(a){var b=this;return b.allowSubItems?(angular.forEach(a,function(a){b.addSubItem(a)}),b):b},c.prototype.clearSubItems=function(){return this.subItems=[],this.subItemsPending=[],this},c.prototype.addSearchKey=function(a){return angular.isString(a)&&(this.searchKey+=" "+a.toLowerCase()),this},c.prototype.displaySearchResults=function(a){var c=this;return c.subItems=[],c.subItemsPending=a,c.noSearchResults=0===a.length,b(function(){c.appendPendingListItemsAsync()}),c},c.prototype.filterSubItems=function(){function a(a,b){function d(a,b){return a.searchable&&a.searchKey.indexOf(b)>=0}var e;return d(a,b)?a:(e=new c(angular.copy(a)),angular.forEach(a.getSubItems(),function(a){d(a,b)&&e.addSubItem(angular.copy(a))}),e.hasSubItems()?e:null)}return function(b){var c=this;if(angular.isString(b)){b=b.toLowerCase();var d,e=[];angular.forEach(c.subItemsAdded,function(c){d=a(c,b),d&&e.push(d)}),c.displaySearchResults(e)}else c.displaySearchResults(angular.copy(c.subItemsAdded));return c}}(),c}]),angular.module("ovh-angular-sidebar-menu").directive("sidebarMenuList",function(){"use strict";return{templateUrl:"ovh-angular-sidebar-menu-list/ovh-angular-sidebar-menu-list.html",restrict:"A",scope:{items:"=sidebarMenuListItems",namespace:"=sidebarMenuListNamespace"},require:["^sidebarMenu","^?sidebarMenuListItem"],bindToController:!0,controllerAs:"ListCtrl",controller:angular.noop}}),angular.module("ovh-angular-sidebar-menu").controller("SidebarMenuCtrl",["$scope","$compile","$state","SidebarMenu",function(a,b,c,d){"use strict";function e(){a.$on("$stateChangeSuccess",function(){d.manageStateChange()})}function f(){return g.loading.init=!0,d.loadInit().then(function(){e(),g.items=d.items,g.actionsOptions=d.actionsMenuOptions,g.popoverSettings={placement:"bottom-left","class":"order-actions-menu-popover",trigger:"outsideClick"}})["finally"](function(){g.loading.init=!1})}var g=this;g.loading={translations:!1,init:!1},g.items=null,f()}]),angular.module("ovh-angular-sidebar-menu").directive("sidebarMenu",function(){"use strict";return{templateUrl:"ovh-angular-sidebar-menu.html",restrict:"A",replace:!0,controllerAs:"sideBarCtrl",controller:"SidebarMenuCtrl",scope:{sidebarNamespace:"="}}}),angular.module("ovh-angular-sidebar-menu").provider("SidebarMenu",function(){"use strict";var a=this,b=["../bower_components/ovh-angular-sidebar-menu/dist/ovh-angular-sidebar-menu"],c="ovh-angular-sidebar-menu-list/ovh-angular-sidebar-menu-list-item/ovh-angular-sidebar-menu-list-item-inner.html",d=10;a.clearTranslationPath=function(){return b=[]},a.addTranslationPath=function(a){return a&&b.push(a),b},a.setInnerMenuItemTemplatePath=function(a){return a&&(c=a),c},a.setMinItemsForEnablingSearch=function(a){return _.isNumber(a)&&(d=a),d},a.$get=["$q","$timeout","$state","$translate","$translatePartialLoader","SidebarMenuListItem",function(a,e,f,g,h,i){function j(a){var b={included:!1,current:!1};return a.loadOnState?(b.included=f.includes(a.loadOnState,a.loadOnStateParams),b.current=f.is(a.loadOnState,a.loadOnStateParams)):a.state&&(b.included=f.includes(a.state,a.stateParams),b.current=f.is(a.state,a.stateParams)),b}var k={items:[],actionsMenuOptions:[],loadDeferred:a.defer(),initPromise:a.when(!0)};return k.setInitializationPromise=function(a){var b=this;return a&&a.then&&(b.initPromise=a),a},k.loadInit=function(){var b=this;return a.all({translations:b.loadTranslations(),init:b.initPromise}).then(function(a){return b.loadDeferred.resolve(a.init),b.manageStateChange(),b.loadDeferred.promise})},k.loadTranslations=function(){return angular.forEach(b,function(a){h.addPart(a)}),g.refresh()},k.getInnerMenuItemTemplatePath=function(){return c},k.getMinItemsForEnablingSearch=function(){return d},k.addMenuItem=function(a,b){var c,d=this;return b?(a.level=b.level+1,c=b.addSubItem(a)):(a.level=1,c=new i(a),d.items.push(c)),c},k.addMenuItems=function(a,b){var c=this;return angular.forEach(a,function(a){c.addMenuItem(a,b)}),c},k.manageMenuItemOpenAndActiveState=function(a){var b=this;return b.toggleMenuItemOpenState(a).manageActiveMenuItem(a)},k.toggleMenuItemOpenState=function(a){var b=this,c=b.getPathToMenuItem(a).path,d=_.filter(b.getAllMenuItems(),{isOpen:!0});return _.each(_.difference(d,c),function(a){a.toggleOpen()}),a.toggleOpen(),b},k.manageActiveMenuItem=function(){var a=null;return function(b){b.state&&(a&&(a.isActive=!1),b.isActive=!0,a=b)}}(),k.manageStateChange=function(){function b(c){return a.all(_.map(c,function(c){var d=j(c);return d.current&&(k.manageActiveMenuItem(c),k.toggleMenuItemOpenState(c)),d.included?c.loadSubItems().then(function(){return c.hasSubItems()&&!c.isOpen&&c.toggleOpen(),k.manageActiveMenuItem(c),b(c.getSubItems())}):a.when(!0)}))}return function(a){return b(a||this.items)}}(),k.addActionsMenuOption=function(a){var b=this;return b.actionsMenuOptions.push(a),a},k.addActionsMenuOptions=function(a){var b=this;return angular.forEach(a,function(a){b.addActionsMenuOption(a)}),a},k.getPathToMenuItem=function(a,b,c){var d=this;return c=c||{found:!1,path:[]},angular.isObject(a)&&a.id?(b=b||d.items,_.find(b,{id:a.id})?(c.found=!0,c.path.push(a)):_.each(b,function(b){!c.found&&b.hasSubItems()&&(c.path.push(b),c=d.getPathToMenuItem(a,b.getSubItems(),c),c.found||c.path.pop())}),c):c},k.getAllMenuItems=function(){function a(b){var c=_.map(b,function(b){return a(b.getSubItems())});return _.each(c,function(a){b=b.concat(a)}),b}return function(){return a(this.items||[])}}(),k.getItemById=function(){function a(b,d){!c&&b&&b.length&&(c=_.find(b,{id:d}),_.each(b,function(b){a(b.getSubItems(),d)}))}var b={},c=!1;return function(d,e){return c=b[d],a(e||this.items,d),c&&(b[d]=c),c}}(),k.updateItemDisplay=function(a,b){var c=this,d=c.getItemById(b);return d&&(a=_.pick(a,_.identity),a=_.pick(a,["title","prefix","icon","iconClass","category","status"]),_.assign(d,a)),d},k}]}),angular.module("ovh-angular-sidebar-menu").run(["$templateCache",function(a){"use strict";a.put("ovh-angular-sidebar-menu-list/ovh-angular-sidebar-menu-list-item/ovh-angular-sidebar-menu-list-item-inner.html","<!-- ARROW --> <span class=item-arrow data-ng-class=\"{ 'no-sub' : !ItemMenuCtrl.item.allowSubItems }\" data-ng-if=!ItemMenuCtrl.item.loading><i class=ovh-font data-ng-class=\"{ 'ovh-font-small-arrow-right' : !ItemMenuCtrl.item.isOpen, 'ovh-font-small-arrow-down' : ItemMenuCtrl.item.isOpen }\" data-ng-if=ItemMenuCtrl.item.allowSubItems></i> </span><!-- LOADING --> <span class=item-loading data-ng-if=ItemMenuCtrl.item.loading><div class=\"oui-spinner oui-spinner_s\"><div class=oui-spinner__container><div class=oui-spinner__image></div></div></div></span><!-- ITEM ICON --> <span class=item-icon data-ng-if=ItemMenuCtrl.item.icon><i data-ng-class=ItemMenuCtrl.item.icon></i> </span><!-- ITEM PREFIX --> <span class=item-prefix data-ng-bind=ItemMenuCtrl.item.prefix></span><!-- ITEM TITLE --> <span class=item-title data-ng-bind=ItemMenuCtrl.item.title></span>"),a.put("ovh-angular-sidebar-menu-list/ovh-angular-sidebar-menu-list-item/ovh-angular-sidebar-menu-list-item.html",'<div class=item-content><!-- item has sref and allow sub items --> <a class=menu-item title="{{ ItemMenuCtrl.item.getTitle() }}" data-ng-if=ItemMenuCtrl.item.state data-ng-click=ItemMenuCtrl.toggleItemOpenState() data-ui-sref="{{ :: ItemMenuCtrl.item.getFullSref() }}" data-ng-include=ItemMenuCtrl.getInnerTemplateUrl()></a><!-- TOGGLE BUTTON --> <button class="menu-item text-left" title="{{ ItemMenuCtrl.item.getTitle() }}" type=button data-ng-if="!ItemMenuCtrl.item.state && !ItemMenuCtrl.item.url && ItemMenuCtrl.item.allowSubItems" data-ng-click=ItemMenuCtrl.toggleItemOpenState() data-ng-include=ItemMenuCtrl.getInnerTemplateUrl()></button><!-- ERROR MESSAGE --><div class=group-error-wrapper data-ng-if="ItemMenuCtrl.item.error && ItemMenuCtrl.errorVisible"><div><i class="ovh-font ovh-font-filled-warning"></i></div><div><p data-ng-bind=ItemMenuCtrl.item.error></p><button class="btn btn-default" type=button data-ng-click=ItemMenuCtrl.toggleItemOpenState() data-translate=sidebar_menu_error_retry></button></div></div><!-- EXTERNAL LINK --> <a class=menu-item title="{{ ItemMenuCtrl.item.parameter }}" data-ng-if="ItemMenuCtrl.item.url && !ItemMenuCtrl.item.allowSubItems" data-ng-href="{{ ItemMenuCtrl.item.url }}" target="{{ ItemMenuCtrl.item.target }}" data-ng-include=ItemMenuCtrl.getInnerTemplateUrl() data-ng-click=ItemMenuCtrl.item.onClick()></a><!-- SLIDING CONTENT --><div class=group-content-wrapper data-ng-slide-down=ItemMenuCtrl.item.isOpen data-duration=0.3><div class=group-toggle-content><!-- GROUP SEARCH --><div data-ng-if=ItemMenuCtrl.isSearchEnabled() class=group-search><form class=group-search-form data-ng-submit=ItemMenuCtrl.launchSearch()><div class=group-search-wrapper><i class="ovh-font ovh-font-search"></i> <input placeholder="{{ \'sidebar_menu_search\' | translate }}" data-ng-change=ItemMenuCtrl.launchSearch() data-ng-model=ItemMenuCtrl.model.search data-ng-model-options="{ debounce: 300 }"></div></form><em data-translate=sidebar_menu_search_no_results data-ng-if=ItemMenuCtrl.item.noSearchResults></em></div><div class=group-scroll-content><!-- GROUP ITEMS --><nav class=menu-sub-items></nav></div><div class=menu-view-all data-ng-if=ItemMenuCtrl.item.viewMore.enabled><div class=menu-view-all-inner><button class="menu-item text-left" title="{{ ItemMenuCtrl.item.viewMore.title }}" type=button data-ng-click=ItemMenuCtrl.viewMore() data-ng-disabled=ItemMenuCtrl.item.viewMore.loading><div class="oui-spinner oui-spinner_s" data-ng-if=ItemMenuCtrl.item.viewMore.loading><div class=oui-spinner__container><div class=oui-spinner__image></div></div></div><span>{{ ItemMenuCtrl.item.viewMore.title }}</span></button></div></div><div class=menu-view-all data-ng-if=ItemMenuCtrl.item.viewAllItem><div class=menu-view-all-inner><a class=menu-item data-ng-href="{{ ItemMenuCtrl.item.viewAllItem.url }}" target="{{ ItemMenuCtrl.item.viewAllItem.target }}"><span data-ng-bind=ItemMenuCtrl.item.viewAllItem.title></span></a></div></div></div></div></div>'),a.put("ovh-angular-sidebar-menu-list/ovh-angular-sidebar-menu-list.html","<li class=item-container data-ng-class=\"{\n        'open' : item.isOpen,\n        'active' : item.isActive,\n        'category-{{item.category}}' : item.category !== 'none',\n        'status-{{item.status}}' : item.status !== 'none',\n"+'    }" data-ng-if="(ListCtrl.namespace && item.namespace ===  ListCtrl.namespace) || (!ListCtrl.namespace && !item.namespace)" data-sidebar-menu-list-item=item data-ng-repeat="item in ListCtrl.items track by $index"></li>'),a.put("ovh-angular-sidebar-menu.html",'<div id=sidebar-menu><!-- LOADER --><div class=text-center data-ng-if=sideBarCtrl.loading.init><div class="oui-spinner oui-spinner_m"><div class=oui-spinner__container><div class=oui-spinner__image></div></div></div></div><div data-ng-if=!sideBarCtrl.loading.init><!-- MENU TITLE --><div class=sidebar-menu-title><button type=button class="navbar-button sideNavBtnClose pull-right"><span class="ovh-font ovh-font-arrow-left"></span></button> <span class="navbar-brand navbar-toggle-title" data-translate=sidebar_menu></span></div><!-- ORDER ACTIONS MENU --><div class=order-actions-menu><actions-menu data-actions-menu-options=sideBarCtrl.actionsOptions data-actions-menu-popover-settings=sideBarCtrl.popoverSettings><span class=cart-icon><i class="ovh-font ovh-font-cart"></i> </span><span class=button-text data-translate=sidebar_menu_order_actions></span> <span class=arrow-icon><i class="ovh-font ovh-font-small-arrow-down"></i></span></actions-menu></div><!-- MENU ITEMS --><ul class="sidebar-menu-list menu-level-1" data-sidebar-menu-list data-sidebar-menu-list-items=sideBarCtrl.items data-sidebar-menu-list-namespace=sidebarNamespace></ul></div></div>')}]);