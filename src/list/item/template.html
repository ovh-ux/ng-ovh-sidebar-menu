<!-- item has sref and allow sub items -->
<a class="oui-sidebar-link"
    title="{{ ItemMenuCtrl.item.getTitle() }}"
    data-ng-if="ItemMenuCtrl.item.state"
    data-ng-click="ItemMenuCtrl.toggleItemOpenState()"
    data-ui-sref="{{ :: ItemMenuCtrl.item.getFullSref() }}"
    data-ng-class="{
        'oui-sidebar-link_active' : ItemMenuCtrl.item.isActive
    }">

    <!-- ITEM ICON -->
    <span class="item-icon"
        data-ng-if="ItemMenuCtrl.item.icon">
        <i data-ng-class="ItemMenuCtrl.item.icon"></i>
    </span>

    <!-- ITEM PREFIX -->
    <span class="item-prefix"
        data-ng-bind="ItemMenuCtrl.item.prefix">
    </span>

    <!-- ITEM TITLE -->
    <span class="item-title"
        data-ng-bind="ItemMenuCtrl.item.title">
    </span>

    <!-- LOADING -->
    <span class="item-loading"
        data-ng-if="ItemMenuCtrl.item.loading">
        <div class="oui-spinner oui-spinner_s">
            <div class="oui-spinner__container">
                <div class="oui-spinner__image"></div>
            </div>
        </div>
    </span>
</a>

<!-- TOGGLE BUTTON -->
<button class="oui-sidebar-link"
    title="{{ ItemMenuCtrl.item.getTitle() }}"
    type="button"
    data-ng-if="!ItemMenuCtrl.item.state && !ItemMenuCtrl.item.url && ItemMenuCtrl.item.allowSubItems"
    data-ng-click="ItemMenuCtrl.toggleItemOpenState()"
    aria-haspopup="{{ItemMenuCtrl.item.allowSubItems}}"
    aria-expanded="{{ItemMenuCtrl.item.isOpen || ItemMenuCtrl.item.isActive}}"
    data-ng-class="{
        'oui-sidebar-link_active' : ItemMenuCtrl.item.isActive || ItemMenuCtrl.item.isOpen
    }"
    >

    <!-- ITEM ICON -->
    <span class="item-icon"
            data-ng-if="ItemMenuCtrl.item.icon">
        <i data-ng-class="ItemMenuCtrl.item.icon"></i>
    </span>

    <!-- ITEM PREFIX -->
    <span class="item-prefix"
            data-ng-bind="ItemMenuCtrl.item.prefix">
    </span>

    <!-- ITEM TITLE -->
    <span class="item-title"
            data-ng-bind="ItemMenuCtrl.item.title">
    </span>

    <!-- LOADING -->
    <span class="item-loading"
            data-ng-if="ItemMenuCtrl.item.loading">
        <div class="oui-spinner oui-spinner_s">
            <div class="oui-spinner__container">
                <div class="oui-spinner__image"></div>
            </div>
        </div>
    </span>
</button>

<!-- ERROR MESSAGE -->
<div class="group-error-wrapper"
    data-ng-if="ItemMenuCtrl.item.error && ItemMenuCtrl.errorVisible">
    <div>
        <i class="ovh-font ovh-font-filled-warning"></i>
    </div>
    <div>
        <p data-ng-bind="ItemMenuCtrl.item.error"></p>
        <button class="btn btn-default"
                type="button"
                data-ng-click="ItemMenuCtrl.toggleItemOpenState()"
                data-translate="sidebar_menu_error_retry"></button>
    </div>
</div>

<!-- EXTERNAL LINK -->
<a class="oui-sidebar-link"
    title="{{ ItemMenuCtrl.item.getTitle() }}"
    data-ng-if="ItemMenuCtrl.item.url && !ItemMenuCtrl.item.allowSubItems"
    data-ng-href="{{ ItemMenuCtrl.item.url }}"
    target="{{ ItemMenuCtrl.item.target }}"
    data-ng-class="{
        'oui-sidebar-link_active' : ItemMenuCtrl.item.isActive || ItemMenuCtrl.item.isOpen
    }"
    >

    <!-- ITEM ICON -->
    <span class="item-icon"
        data-ng-if="ItemMenuCtrl.item.icon">
        <i data-ng-class="ItemMenuCtrl.item.icon"></i>
    </span>

    <!-- ITEM PREFIX -->
    <span class="item-prefix"
        data-ng-bind="ItemMenuCtrl.item.prefix">
    </span>

    <!-- ITEM TITLE -->
    <span class="item-title"
        data-ng-bind="ItemMenuCtrl.item.title">
    </span>

    <!-- LOADING -->
    <span class="item-loading"
        data-ng-if="ItemMenuCtrl.item.loading">
        <div class="oui-spinner oui-spinner_s">
            <div class="oui-spinner__container">
                <div class="oui-spinner__image"></div>
            </div>
        </div>
    </span>
</a>

<div data-ng-if="ItemMenuCtrl.isSearchEnabled()"
        class="group-search">
    <form class="group-search-form"
            data-ng-submit="ItemMenuCtrl.launchSearch()">
        <div class="group-search-wrapper">
            <i class="ovh-font ovh-font-search"></i>
            <input type="text"
                    placeholder="{{ :: 'sidebar_menu_search' | translate }}"
                    data-ng-change="ItemMenuCtrl.launchSearch()"
                    data-ng-model="ItemMenuCtrl.model.search"
                    data-ng-model-options="{ debounce: 300 }" />
        </div>
    </form>
    <em data-translate="sidebar_menu_search_no_results"
        data-ng-if="ItemMenuCtrl.item.noSearchResults">
    </em>
</div>

<!-- <div class="group-scroll-content">
    <-- GROUP ITEMS -->
    <!-- <nav class="menu-sub-items"></nav> -- >
</div> -->

<!-- GROUP ITEMS -->
<div class="oui-sidebar-menu oui-sidebar-menu_fixed menu-sub-items">
    <header class="oui-sidebar-menu__header"
            data-ng-if="ItemMenuCtrl.item.level !== 0">
        <div class="oui-sidebar-menu__back">
            <button type="button" class="oui-button oui-button_link oui-button_icon-left"
                    aria-label="Return to previous navigation menu"
                    data-ng-click="ItemMenuCtrl.toggleItemOpenState()">
                <span class="oui-icon oui-icon-chevron-left" aria-hidden="true"></span>
            </button>
        </div>
        <!-- <span class="oui-sidebar-menu__breadcrumb">BREADCRUMB</span> -->
        <p class="oui-sidebar-menu__title" data-ng-bind="ItemMenuCtrl.item.title"></p>
    </header>
</div>

<div class="menu-view-all" data-ng-if="ItemMenuCtrl.item.viewMore.enabled">
    <div class="menu-view-all-inner">
        <button class="menu-item text-left"
                title="{{ ItemMenuCtrl.item.viewMore.title }}"
                type="button"
                data-ng-click="ItemMenuCtrl.viewMore()"
                data-ng-disabled="ItemMenuCtrl.item.viewMore.loading">
            <div class="oui-spinner oui-spinner_s"
                 data-ng-if="ItemMenuCtrl.item.viewMore.loading">
                <div class="oui-spinner__container">
                    <div class="oui-spinner__image"></div>
                </div>
            </div>
            <span>{{ ItemMenuCtrl.item.viewMore.title }}</span>
        </button>
    </div>
</div>

<div class="menu-view-all" data-ng-if="ItemMenuCtrl.item.viewAllItem">
    <div class="menu-view-all-inner">
        <a class="menu-item"
            data-ng-href="{{ ItemMenuCtrl.item.viewAllItem.url }}"
            target="{{ ItemMenuCtrl.item.viewAllItem.target }}">
            <span data-ng-bind="ItemMenuCtrl.item.viewAllItem.title"></span>
        </a>
    </div>
</div>


<!-- </div> -->
